{% extends 'admin/_page.twig' %}
{% block title %}{{ trans('admin.intro.title') }}{% endblock %}
{% block content %}
    <div class="container-fluid">
        <main class="intro overview">
            <div class="row">
                <div class="col-md-12">
                    <h1>{{ trans('admin.intro.title') }}</h1>
                </div>
                <div class="col-md-12">
                    {% set excel_fields = ['id', 'status', 'last_name', 'first_name', 'birthday', 'address', 'city', 'postal', 'phone', 'contact_phone', 'email', 'pcn', 'shirt_size', 'gender', 'remarks', 'transaction_id', 'transaction_status', 'transaction_amount'] %}
                    <table id="spreadsheet" class="table table-responsive table-sm application-list spreadsheet table-striped">
                        <thead>
                            <tr>
                                {% for field in excel_fields %}
                                    <th>{{ trans('admin.intro.' ~ field) }}</th>
                                {% endfor %}
                            </tr>
                        </thead>
                        <tbody>
                            {% for application in applications %}
                                <tr class="{{ application.status|str_slug }}">
                                    {% for field in excel_fields %}
                                        <td>
                                            {% if application[field] is same as(false) %} {{ trans('admin.intro.false') }} {% elseif application[field] is same as(true) %} {{ trans('admin.intro.true') }} {% else %} {{ application[field]|default('-') }} {% endif %}{{ "\t" }}
                                        </td>
                                    {% endfor %}

                                    {#{{ trans('admin.intro.status_' ~ application.status) }}#}
                                    {#{% if application.status == 'new' and application.email_confirmation_token == null %}#}
                                    {#â€“ {{ trans('admin.intro.no_mail') }}#}
                                    {#{% endif %}#}
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                    <small>{{ trans_choice('admin.intro.count', applications.count, { count: applications.count, confirmed: confirmed_count, email_unconfirmed: email_unconfirmed_count }) }} </small>
                </div>
            </div>
        </main>
    </div>
{% endblock %}
{% block scripts %}
{{ parent() }}
<script src="{{ mix('js/spreadsheet.js') }}"></script>
{% endblock %}